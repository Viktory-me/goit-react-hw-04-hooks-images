(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{14:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(5),o=n.n(a),s=(n(14),n(8)),i=n(3),u=n(9),j=n.n(u);var l=function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=21770810-71d636d270901957bd723d7c5&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Not found. Try to change name"))}))},b=(n(35),n(0));function m(e){var t=e.onSubmit,n=Object(c.useState)(""),r=Object(i.a)(n,2),a=r[0],o=r[1],s=function(){o("")};return Object(b.jsx)("header",{className:"Searchbar",children:Object(b.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==a.trim()?(t(a),s()):alert("Please enter search query")},children:[Object(b.jsx)("button",{type:"submit",className:"SearchForm-button"}),Object(b.jsx)("input",{value:a,onChange:function(e){return o(e.currentTarget.value.toLowerCase())},className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}var d=function(e){var t=e.onClick;return Object(b.jsx)("button",{onClick:function(){t(),setTimeout((function(){window.scrollBy({top:document.documentElement.clientHeight-130,behavior:"smooth"})}),500)},className:"Button",type:"button",children:"Load more"})},O=document.querySelector("#modal-root");var h=function(e){var t=e.src,n=e.alt,r=e.onClose,o=Object(c.useRef)(!0);Object(c.useEffect)((function(){return o.current?(window.addEventListener("keydown",s),void(o.current=!1)):function(){window.removeEventListener("keydown",s)}}));var s=function(e){"Escape"===e.code&&r()};return Object(a.createPortal)(Object(b.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&r()},children:Object(b.jsx)("div",{className:"Modal",children:Object(b.jsx)("img",{src:t,alt:n})})}),O)};var f=function(e){var t=e.src,n=e.alt,r=e.largeImageUrl,a=Object(c.useState)(!1),o=Object(i.a)(a,2),s=o[0],u=o[1],j=function(){return u(!s)};return Object(b.jsxs)("li",{className:"ImageGalleryItem",children:[Object(b.jsx)("img",{onClick:j,src:t,alt:n,className:"ImageGalleryItem-image"}),s&&Object(b.jsx)(h,{onClose:j,src:r,alt:n})]})};var x=function(e){var t=e.images;return Object(b.jsx)("ul",{className:"ImageGallery",children:t.map((function(e,t){return Object(b.jsx)(f,{src:e.webformatURL,alt:e.tags,largeImageUrl:e.largeImageURL},t)}))})};function g(e){var t=e.text;return Object(b.jsxs)("p",{children:[" ",t," "]})}g.defaultProps={text:"Something went wrong, please try to change querry "};var v=g;function p(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(1),o=Object(i.a)(a,2),u=o[0],O=o[1],h=Object(c.useState)([]),f=Object(i.a)(h,2),g=f[0],p=f[1],S=Object(c.useState)("idle"),w=Object(i.a)(S,2),y=w[0],k=w[1],C=Object(c.useState)(null),N=Object(i.a)(C,2),E=N[0],I=N[1];Object(c.useEffect)((function(){n&&(k("pending"),l(n,u).then((function(e){if(!(e.total>0))return Promise.reject(new Error("Invalid request"));p((function(t){return[].concat(Object(s.a)(t),Object(s.a)(e.hits))})),k("resolved"),u>1&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){I(e),k("rejected")})))}),[n,u,p]);var L=function(){return O((function(e){return e+1}))},q=function(e){r(e),O(1),p([])};switch(y){case"idle":return Object(b.jsx)("div",{children:Object(b.jsx)(m,{onSubmit:q})});case"pending":return Object(b.jsxs)("div",{children:[Object(b.jsx)(m,{onSubmit:q}),Object(b.jsx)(x,{images:g}),Object(b.jsx)(j.a,{}),Object(b.jsx)(d,{onClick:L})]});case"resolved":return Object(b.jsxs)("div",{children:[Object(b.jsx)(m,{onSubmit:q}),Object(b.jsx)(x,{images:g}),Object(b.jsx)(d,{onClick:L})]});case"rejected":return Object(b.jsxs)("div",{children:[Object(b.jsx)(m,{onSubmit:q}),Object(b.jsx)(v,{text:E.text})]});default:return Object(b.jsx)("div",{children:Object(b.jsx)(m,{onSubmit:q})})}}o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(p,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.f3c1123e.chunk.js.map