(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{15:function(e,t,n){},36:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(4),o=n.n(a),s=(n(15),n(9)),i=n(3),u=n(7),j=n(10),l=n.n(j);var b=function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=21770810-71d636d270901957bd723d7c5&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Not found. Try to change name"))}))},d=(n(36),n(37),n(1));function m(e){var t=e.onSubmit,n=Object(c.useState)(""),r=Object(i.a)(n,2),a=r[0],o=r[1],s=function(){o("")};return Object(d.jsx)("header",{className:"Searchbar",children:Object(d.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==a.trim()?(t(a),s()):Object(u.b)("\ud83e\udd84Please enter search query")},children:[Object(d.jsx)("button",{type:"submit",className:"SearchForm-button"}),Object(d.jsx)("input",{value:a,onChange:function(e){return o(e.currentTarget.value.toLowerCase())},className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}var O=function(e){var t=e.onClick;return Object(d.jsx)("button",{onClick:function(){t(),setTimeout((function(){window.scrollBy({top:document.documentElement.clientHeight-130,behavior:"smooth"})}),500)},className:"Button",type:"button",children:"Load more"})},h=document.querySelector("#modal-root");var f=function(e){var t=e.src,n=e.alt,r=e.onClose,o=Object(c.useRef)(!0);Object(c.useEffect)((function(){return o.current?(window.addEventListener("keydown",s),void(o.current=!1)):function(){window.removeEventListener("keydown",s)}}));var s=function(e){"Escape"===e.code&&r()};return Object(a.createPortal)(Object(d.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&r()},children:Object(d.jsx)("div",{className:"Modal",children:Object(d.jsx)("img",{src:t,alt:n})})}),h)};var g=function(e){var t=e.src,n=e.alt,r=e.largeImageUrl,a=Object(c.useState)(!1),o=Object(i.a)(a,2),s=o[0],u=o[1],j=function(){return u(!s)};return Object(d.jsxs)("li",{className:"ImageGalleryItem",children:[Object(d.jsx)("img",{onClick:j,src:t,alt:n,className:"ImageGalleryItem-image"}),s&&Object(d.jsx)(f,{onClose:j,src:r,alt:n})]})};var x=function(e){var t=e.images;return Object(d.jsx)("ul",{className:"ImageGallery",children:t.map((function(e,t){return Object(d.jsx)(g,{src:e.webformatURL,alt:e.tags,largeImageUrl:e.largeImageURL},t)}))})};function v(e){var t=e.text;return Object(d.jsxs)("p",{children:[" ",t," "]})}v.defaultProps={text:"Something went wrong, please try again later "};var p=v;function w(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(1),o=Object(i.a)(a,2),j=o[0],h=o[1],f=Object(c.useState)([]),g=Object(i.a)(f,2),v=g[0],w=g[1],S=Object(c.useState)("idle"),y=Object(i.a)(S,2),k=y[0],C=y[1],N=Object(c.useState)(null),E=Object(i.a)(N,2),I=E[0],L=E[1];Object(c.useEffect)((function(){n&&(C("pending"),b(n,j).then((function(e){if(!(e.total>0))return Promise.reject(new Error("Invalid request"));w((function(t){return[].concat(Object(s.a)(t),Object(s.a)(e.hits))})),C("resolved"),j>1&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){L(e),C("rejected")})))}),[n,j,w]);var P=function(){return h((function(e){return e+1}))},T=function(e){r(e),h(1),w([])};switch(k){case"idle":return Object(d.jsx)("div",{children:Object(d.jsx)(m,{onSubmit:T})});case"pending":return Object(d.jsxs)("div",{children:[Object(d.jsx)(m,{onSubmit:T}),Object(d.jsx)(x,{images:v}),Object(d.jsx)(l.a,{}),Object(d.jsx)(O,{onClick:P})]});case"resolved":return Object(d.jsxs)("div",{children:[Object(d.jsx)(m,{onSubmit:T}),Object(d.jsx)(x,{images:v}),Object(d.jsx)(O,{onClick:P})]});case"rejected":return Object(d.jsxs)("div",{children:[Object(d.jsx)(m,{onSubmit:T}),Object(d.jsx)(p,{text:I.text})]});default:return Object(d.jsxs)("div",{children:[Object(d.jsx)(m,{onSubmit:T}),Object(d.jsx)(u.a,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}}o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(w,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.b60f590c.chunk.js.map